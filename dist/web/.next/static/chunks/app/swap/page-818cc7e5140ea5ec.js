(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{5545:function(){},551:function(e,n,t){Promise.resolve().then(t.bind(t,2467))},2467:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var a=t(7821),i=t(3107),s=t.n(i),o=t(8103),l=t(6299),c=t(3198),r=t(887).Buffer;let u=[{name:"SOL",mint:"So11111111111111111111111111111111111111112",decimals:9},{name:"USDC",mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6},{name:"BONK",mint:"DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263",decimals:5},{name:"WIF",mint:"EKpQGSJtjMFqKZ9KQanSqYXRcF8fBopzLHYxdM65zcjm",decimals:6}],d=(e,n)=>{let t;return function(){for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),e(...i)},n)}};function m(){let[e,n]=(0,c.useState)(u[0]),[t,i]=(0,c.useState)(u[1]),[m,p]=(0,c.useState)(0),[h,f]=(0,c.useState)(0),[b,_]=(0,c.useState)(null),w=(0,o.O)(),v=new l.Connection("https://mainnet.helius-rpc.com/?api-key=39499f93-70e8-42b0-a690-1655c13bc6e9"),g=(0,c.useCallback)(d(j,500),[]);async function j(n){if(isNaN(n)||n<=0){console.error("Invalid fromAmount value:",n);return}let a=await fetch("https://quote-api.jup.ag/v6/quote?inputMint=".concat(e.mint,"&outputMint=").concat(t.mint,"&amount=").concat(n*Math.pow(10,e.decimals),"&slippage=0.5")),i=await a.json();if(i&&i.outAmount){let e=Number(i.outAmount)/Math.pow(10,t.decimals);f(e)}_(i)}async function x(){var e;if(!w.connected||!w.signTransaction){console.error("Wallet is not connected or does not support signing transactions");return}let n=await fetch("https://quote-api.jup.ag/v6/swap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quoteResponse:b,userPublicKey:null===(e=w.publicKey)||void 0===e?void 0:e.toString(),wrapAndUnwrapSol:!0})}),{swapTransaction:t}=await n.json();try{let e=r.from(t,"base64"),n=l.VersionedTransaction.deserialize(e),a=await w.signTransaction(n),i=a.serialize(),s=await v.sendRawTransaction(i,{skipPreflight:!0,maxRetries:2}),o=await v.getLatestBlockhash();await v.confirmTransaction({blockhash:o.blockhash,lastValidBlockHeight:o.lastValidBlockHeight,signature:s},"confirmed"),console.log("Transaction confirmed: https://solscan.io/tx/".concat(s))}catch(e){console.error("Error signing or sending the transaction:",e)}}return(0,c.useEffect)(()=>{g(m)},[m,g]),(0,a.jsx)("div",{className:s().body,children:(0,a.jsxs)("div",{className:s().innerContainer,children:[(0,a.jsxs)("div",{className:s().inputContainer,children:[(0,a.jsx)("div",{className:s().labels,children:"You pay"}),(0,a.jsx)("input",{type:"number",value:m,onChange:e=>{p(Number(e.target.value))},className:s().inputField}),(0,a.jsx)("select",{value:e.name,onChange:e=>{n(u.find(n=>n.name===e.target.value)||u[0])},className:s().selectField,children:u.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.mint))})]}),(0,a.jsxs)("div",{className:s().inputContainer,children:[(0,a.jsx)("div",{className:s().labels,children:"You receive"}),(0,a.jsx)("input",{type:"number",value:h,className:s().inputField,readOnly:!0}),(0,a.jsx)("select",{value:t.name,onChange:e=>{i(u.find(n=>n.name===e.target.value)||u[0])},className:s().selectField,children:u.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.mint))})]}),(0,a.jsx)("button",{onClick:x,className:s().button,disabled:t.mint===e.mint,children:"Swap"})]})})}},3107:function(e){e.exports={body:"swap_body__8ZoFr",innerContainer:"swap_innerContainer__i9KUK",inputContainer:"swap_inputContainer__xYIO_",labels:"swap_labels__bl9_J",inputField:"swap_inputField__aGYte",selectField:"swap_selectField__GjU2Q",button:"swap_button__4Acat"}}},function(e){e.O(0,[449,145,751,322,62,744],function(){return e(e.s=551)}),_N_E=e.O()}]);